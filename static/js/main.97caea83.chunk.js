(this["webpackJsonpreact_people-table-advanced"]=this["webpackJsonpreact_people-table-advanced"]||[]).push([[0],{39:function(e,t,s){},40:function(e,t,s){},41:function(e,t,s){"use strict";s.r(t);var a=s(26),c=s(8),n=(s(36),s(37),s(3)),r=s(9),l=s(5),i=s(0),j=s(10),o=s.n(j),d=s(15),b=s(27);function u(e,t){var s=new URLSearchParams(e.toString());return Object.entries(t).forEach((function(e){var t=Object(l.a)(e,2),a=t[0],c=t[1];null===c?s.delete(a):Array.isArray(c)?(s.delete(a),c.forEach((function(e){s.append(a,e)}))):s.set(a,c)})),s.toString()}var h=s(1),x=["children","params"],O=function(e){var t=e.children,s=e.params,a=Object(b.a)(e,x),n=Object(c.d)(),r=Object(l.a)(n,1)[0];return Object(h.jsx)(c.b,Object(d.a)(Object(d.a)({to:{search:u(r,s)}},a),{},{children:t}))},m=function(){var e=Object(c.d)(),t=Object(l.a)(e,2),s=t[0],a=t[1],n=s.get("sex")||"",i=s.getAll("centuries")||[],j=s.get("query")||"";return Object(h.jsxs)("nav",{className:"panel",children:[Object(h.jsx)("p",{className:"panel-heading",children:"Filters"}),Object(h.jsxs)("p",{className:"panel-tabs","data-cy":"SexFilter",children:[Object(h.jsx)(O,{className:o()({"is-active":!n}),params:{sex:null},children:"All"}),Object(h.jsx)(O,{className:o()({"is-activ":"m"===n}),params:{sex:"m"},children:"Male"}),Object(h.jsx)(O,{className:o()({"is-active":"f"===n}),params:{sex:"f"},children:"Female"})]}),Object(h.jsx)("div",{className:"panel-block",children:Object(h.jsxs)("p",{className:"control has-icons-left",children:[Object(h.jsx)("input",{"data-cy":"NameFilter",type:"search",className:"input",placeholder:"Search",value:j,onChange:function(e){a(u(s,{query:e.target.value||null}))}}),Object(h.jsx)("span",{className:"icon is-left",children:Object(h.jsx)("i",{className:"fas fa-search","aria-hidden":"true"})})]})}),Object(h.jsx)("div",{className:"panel-block",children:Object(h.jsxs)("div",{className:"level is-flex-grow-1 is-mobile","data-cy":"CenturyFilter",children:[Object(h.jsx)("div",{className:"level-left",children:["16","17","18","19","20"].map((function(e){return Object(h.jsx)(O,{"data-cy":"century",className:o()("button","mr-1",{"is-info":i.includes(e)}),params:{centuries:(t=e,i.includes(t)?i.filter((function(e){return e!==t})):[].concat(Object(r.a)(i),[t]))},children:e},e);var t}))}),Object(h.jsx)("div",{className:"level-right ml-4",children:Object(h.jsx)(O,{"data-cy":"centuryALL",className:"button is-success is-outlined",params:{centuries:[]},children:"All"})})]})}),Object(h.jsx)("div",{className:"panel-block",children:Object(h.jsx)(O,{className:"button is-link is-outlined is-fullwidth",params:{centuries:[],sex:null,query:null},onClick:function(){a({})},children:"Reset all filters"})})]})},p=s(4),f=s(6),v=(s(39),function(){return Object(h.jsx)("div",{className:"Loader","data-cy":"loader",children:Object(h.jsx)("div",{className:"Loader__content"})})}),N=function(e){var t=e.person;return Object(h.jsx)(c.b,{to:"/people/".concat(t.slug),className:o()({"has-text-danger":"f"===t.sex}),children:t.name})},g="https://mate-academy.github.io/react_people-table/api/people.json";function w(e){return new Promise((function(t){return setTimeout(t,e)}))}function y(){return S.apply(this,arguments)}function S(){return(S=Object(f.a)(Object(p.a)().mark((function e(){return Object(p.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",w(500).then((function(){return fetch(g)})).then((function(e){return e.json()})));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var C=function(){var e=Object(i.useState)([]),t=Object(l.a)(e,2),s=t[0],a=t[1],j=Object(i.useState)(!0),b=Object(l.a)(j,2),u=b[0],x=b[1],m=Object(i.useState)(!1),g=Object(l.a)(m,2),w=g[0],S=g[1],C=Object(c.d)(),A=Object(l.a)(C,1)[0],k=A.get("sort")||"",E=A.get("sortOrder")||"",P=Object(n.q)().selectedPersonId,L=function(e){return k!==e?{sort:e,sortOrder:"ASC"}:k===e&&"ASC"===E?{sortOrder:"DESC"}:{sort:null,sortOrder:null}};Object(i.useEffect)((function(){var e=function(){var e=Object(f.a)(Object(p.a)().mark((function e(){var t;return Object(p.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,y();case 3:t=e.sent,a(t),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),S(!0);case 10:return e.prev=10,x(!1),e.finish(10);case 13:case"end":return e.stop()}}),e,null,[[0,7,10,13]])})));return function(){return e.apply(this,arguments)}}();e()}),[]);var F=function(e){var t=Object(c.d)(),s=Object(l.a)(t,1)[0];return Object(i.useMemo)((function(){var t,a=null===(t=s.get("query"))||void 0===t?void 0:t.toLowerCase(),c=s.get("sex")||"",n=s.getAll("centuries")||[],l=s.get("sortOrder"),i=s.get("sort"),j=Object(r.a)(e);return a&&(j=j.filter((function(e){return e.name.toLowerCase().includes(a)||e.sex.toLowerCase().includes(a)}))),c&&(j=j.filter((function(e){return e.sex===c}))),n.length>0&&(j=j.filter((function(e){return n.includes(Math.ceil(Number(e.born)/100).toString())}))),"name"===i?j.sort((function(e,t){return"ASC"===l?e.name.localeCompare(t.name):t.name.localeCompare(e.name)})):"sex"===i?j.sort((function(e,t){return"ASC"===l?e.sex.localeCompare(t.sex):t.sex.localeCompare(e.sex)})):("born"===i||"died"===i)&&j.sort((function(e,t){return"ASC"===l?e.born-t.born:t.born-e.born})),j}),[e,s])}(s.map((function(e){var t=s.find((function(t){return t.name===e.motherName})),a=s.find((function(t){return t.name===e.fatherName}));return Object(d.a)(Object(d.a)({},e),{},{mother:t,father:a})})));return u?Object(h.jsx)(v,{}):w?Object(h.jsx)("p",{"data-cy":"peopleLoadingError",className:"has-text-danger",children:"Something went wrong"}):F.length?Object(h.jsxs)("table",{"data-cy":"peopleTable",className:"table is-striped is-hoverable is-narrow is-fullwidth",children:[Object(h.jsx)("thead",{children:Object(h.jsxs)("tr",{children:[Object(h.jsx)("th",{children:Object(h.jsxs)("span",{className:"is-flex is-flex-wrap-nowrap",children:["Name",Object(h.jsx)(O,{params:L("name"),children:Object(h.jsx)("span",{className:"icon",children:Object(h.jsx)("i",{className:o()("fas",{"fa-sort":"name"!==k,"fa-sort-up":"name"===k&&"ASC"===E,"fa-sort-down":"name"===k&&"DESC"===E})})})})]})}),Object(h.jsx)("th",{children:Object(h.jsxs)("span",{className:"is-flex is-flex-wrap-nowrap",children:["Sex",Object(h.jsx)(O,{params:L("sex"),children:Object(h.jsx)("span",{className:"icon",children:Object(h.jsx)("i",{className:o()("fas",{"fa-sort":"sex"!==k,"fa-sort-up":"sex"===k&&"ASC"===E,"fa-sort-down":"sex"===k&&"DESC"===E})})})})]})}),Object(h.jsx)("th",{children:Object(h.jsxs)("span",{className:"is-flex is-flex-wrap-nowrap",children:["Born",Object(h.jsx)(O,{params:L("born"),children:Object(h.jsx)("span",{className:"icon",children:Object(h.jsx)("i",{className:o()("fas",{"fa-sort":"born"!==k,"fa-sort-up":"born"===k&&"ASC"===E,"fa-sort-down":"born"===k&&"DESC"===E})})})})]})}),Object(h.jsx)("th",{children:Object(h.jsxs)("span",{className:"is-flex is-flex-wrap-nowrap",children:["Died",Object(h.jsx)(O,{params:L("died"),children:Object(h.jsx)("span",{className:"icon",children:Object(h.jsx)("i",{className:o()("fas",{"fa-sort":"died"!==k,"fa-sort-up":"died"===k&&"ASC"===E,"fa-sort-down":"died"===k&&"DESC"===E})})})})]})}),Object(h.jsx)("th",{children:"Mother"}),Object(h.jsx)("th",{children:"Father"})]})}),Object(h.jsx)("tbody",{children:F.map((function(e){return Object(h.jsxs)("tr",{"data-cy":"person",className:o()({"has-background-warning":P===e.slug}),children:[Object(h.jsx)("td",{children:Object(h.jsx)(N,{person:e})}),Object(h.jsx)("td",{children:e.sex}),Object(h.jsx)("td",{children:e.born}),Object(h.jsx)("td",{children:e.died}),Object(h.jsx)("td",{children:e.mother?Object(h.jsx)(N,{person:e.mother}):e.motherName||"-"}),Object(h.jsx)("td",{children:e.father?Object(h.jsx)(N,{person:e.father}):e.fatherName||"-"})]},e.name)}))})]}):Object(h.jsx)("p",{"data-cy":"noPeopleMessage",children:"There are no people on the server"})},A=function(){return Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)("h1",{className:"title",children:"People Page"}),Object(h.jsx)("div",{className:"block",children:Object(h.jsxs)("div",{className:"columns is-desktop is-flex-direction-row-reverse",children:[Object(h.jsx)("div",{className:"column is-7-tablet is-narrow-desktop",children:Object(h.jsx)(m,{})}),Object(h.jsx)("div",{className:"column",children:Object(h.jsx)("div",{className:"box table-container",children:Object(h.jsx)(C,{})})})]})})]})},k=function(e){var t=e.isActive;return o()("navbar-item",{"has-background-grey-lighter":t})},E=function(){return Object(h.jsx)("nav",{"data-cy":"nav",className:"navbar is-fixed-top has-shadow",role:"navigation","aria-label":"main navigation",children:Object(h.jsx)("div",{className:"container",children:Object(h.jsxs)("div",{className:"navbar-brand",children:[Object(h.jsx)(c.c,{to:"/",className:k,children:"Home"}),Object(h.jsx)(c.c,{to:"/people",className:k,children:"People"})]})})})},P=(s(40),function(){return Object(h.jsx)("h1",{className:"title",children:"Home Page"})}),L=function(){return Object(h.jsx)("h1",{className:"title",children:"Page not found"})},F=function(){return Object(h.jsxs)("div",{"data-cy":"app",children:[Object(h.jsx)(E,{}),Object(h.jsx)("div",{className:"section",children:Object(h.jsx)("div",{className:"container",children:Object(h.jsxs)(n.d,{children:[Object(h.jsx)(n.b,{path:"/",element:Object(h.jsx)(P,{})}),Object(h.jsxs)(n.b,{path:"people",children:[Object(h.jsx)(n.b,{index:!0,element:Object(h.jsx)(A,{})}),Object(h.jsx)(n.b,{path:":selectedPersonId",element:Object(h.jsx)(A,{})})]}),Object(h.jsx)(n.b,{path:"/home",element:Object(h.jsx)(n.a,{to:"/",replace:!0})}),Object(h.jsx)(n.b,{path:"*",element:Object(h.jsx)(L,{})})]})})})]})};Object(a.createRoot)(document.getElementById("root")).render(Object(h.jsx)(c.a,{children:Object(h.jsx)(F,{})}))}},[[41,1,2]]]);
//# sourceMappingURL=main.97caea83.chunk.js.map
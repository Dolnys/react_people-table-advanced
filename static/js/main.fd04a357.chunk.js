(this["webpackJsonpreact_people-table-advanced"]=this["webpackJsonpreact_people-table-advanced"]||[]).push([[0],{39:function(e,t,a){},40:function(e,t,a){},41:function(e,t,a){"use strict";a.r(t);var s=a(26),c=a(8),n=(a(36),a(37),a(3)),r=a(15),l=a(4),i=a(6),o=a(5),j=a(0),d=a(9),b=a(10),u=a.n(b),h=a(27);function x(e,t){var a=new URLSearchParams(e.toString());return Object.entries(t).forEach((function(e){var t=Object(o.a)(e,2),s=t[0],c=t[1];null===c?a.delete(s):Array.isArray(c)?(a.delete(s),c.forEach((function(e){a.append(s,e)}))):a.set(s,c)})),a.toString()}var O=a(1),p=["children","params"],m=function(e){var t=e.children,a=e.params,s=Object(h.a)(e,p),n=Object(c.d)(),l=Object(o.a)(n,1)[0];return Object(O.jsx)(c.b,Object(r.a)(Object(r.a)({to:{search:x(l,a)}},s),{},{children:t}))},f=function(){var e=Object(c.d)(),t=Object(o.a)(e,2),a=t[0],s=t[1],n=a.get("sex")||"",r=a.getAll("centuries")||[],l=a.get("query")||"";return Object(O.jsxs)("nav",{className:"panel",children:[Object(O.jsx)("p",{className:"panel-heading",children:"Filters"}),Object(O.jsxs)("p",{className:"panel-tabs","data-cy":"SexFilter",children:[Object(O.jsx)(m,{className:u()({"is-active":!n}),params:{sex:null},children:"All"}),Object(O.jsx)(m,{className:u()({"is-activ":"m"===n}),params:{sex:"m"},children:"Male"}),Object(O.jsx)(m,{className:u()({"is-active":"f"===n}),params:{sex:"f"},children:"Female"})]}),Object(O.jsx)("div",{className:"panel-block",children:Object(O.jsxs)("p",{className:"control has-icons-left",children:[Object(O.jsx)("input",{"data-cy":"NameFilter",type:"search",className:"input",placeholder:"Search",value:l,onChange:function(e){s(x(a,{query:e.target.value||null}))}}),Object(O.jsx)("span",{className:"icon is-left",children:Object(O.jsx)("i",{className:"fas fa-search","aria-hidden":"true"})})]})}),Object(O.jsx)("div",{className:"panel-block",children:Object(O.jsxs)("div",{className:"level is-flex-grow-1 is-mobile","data-cy":"CenturyFilter",children:[Object(O.jsx)("div",{className:"level-left",children:["16","17","18","19","20"].map((function(e){return Object(O.jsx)(m,{"data-cy":"century",className:u()("button","mr-1",{"is-info":r.includes(e)}),params:{centuries:(t=e,r.includes(t)?r.filter((function(e){return e!==t})):[].concat(Object(d.a)(r),[t]))},children:e},e);var t}))}),Object(O.jsx)("div",{className:"level-right ml-4",children:Object(O.jsx)(m,{"data-cy":"centuryALL",className:"button is-success is-outlined",params:{centuries:[]},children:"All"})})]})}),Object(O.jsx)("div",{className:"panel-block",children:Object(O.jsx)(m,{className:"button is-link is-outlined is-fullwidth",params:{centuries:[],sex:null,query:null},onClick:function(){s({})},children:"Reset all filters"})})]})},v=(a(39),function(){return Object(O.jsx)("div",{className:"Loader","data-cy":"loader",children:Object(O.jsx)("div",{className:"Loader__content"})})}),N=function(e){var t=e.person;return Object(O.jsx)(c.b,{to:"/people/".concat(t.slug),className:u()({"has-text-danger":"f"===t.sex}),children:t.name})},g=function(e){var t=e.loading,a=e.error,s=e.displayPeople,r=e.people,l=Object(c.d)(),i=Object(o.a)(l,1)[0],j=i.get("sort")||"",d=i.get("sortOrder")||"",b=Object(n.q)().selectedPersonId,h=function(e){return j!==e?{sort:e,sortOrder:"ASC"}:j===e&&"ASC"===d?{sortOrder:"DESC"}:{sort:null,sortOrder:null}};return t?Object(O.jsx)(v,{}):a?Object(O.jsx)("p",{"data-cy":"peopleLoadingError",className:"has-text-danger",children:"Something went wrong"}):0===r.length?Object(O.jsx)("p",{"data-cy":"noPeopleMessage",children:"There are no people on the server"}):Object(O.jsxs)("table",{"data-cy":"peopleTable",className:"table is-striped is-hoverable is-narrow is-fullwidth",children:[Object(O.jsx)("thead",{children:Object(O.jsxs)("tr",{children:[Object(O.jsx)("th",{children:Object(O.jsxs)("span",{className:"is-flex is-flex-wrap-nowrap",children:["Name",Object(O.jsx)(m,{params:h("name"),children:Object(O.jsx)("span",{className:"icon",children:Object(O.jsx)("i",{className:u()("fas",{"fa-sort":"name"!==j,"fa-sort-up":"name"===j&&"ASC"===d,"fa-sort-down":"name"===j&&"DESC"===d})})})})]})}),Object(O.jsx)("th",{children:Object(O.jsxs)("span",{className:"is-flex is-flex-wrap-nowrap",children:["Sex",Object(O.jsx)(m,{params:h("sex"),children:Object(O.jsx)("span",{className:"icon",children:Object(O.jsx)("i",{className:u()("fas",{"fa-sort":"sex"!==j,"fa-sort-up":"sex"===j&&"ASC"===d,"fa-sort-down":"sex"===j&&"DESC"===d})})})})]})}),Object(O.jsx)("th",{children:Object(O.jsxs)("span",{className:"is-flex is-flex-wrap-nowrap",children:["Born",Object(O.jsx)(m,{params:h("born"),children:Object(O.jsx)("span",{className:"icon",children:Object(O.jsx)("i",{className:u()("fas",{"fa-sort":"born"!==j,"fa-sort-up":"born"===j&&"ASC"===d,"fa-sort-down":"born"===j&&"DESC"===d})})})})]})}),Object(O.jsx)("th",{children:Object(O.jsxs)("span",{className:"is-flex is-flex-wrap-nowrap",children:["Died",Object(O.jsx)(m,{params:h("died"),children:Object(O.jsx)("span",{className:"icon",children:Object(O.jsx)("i",{className:u()("fas",{"fa-sort":"died"!==j,"fa-sort-up":"died"===j&&"ASC"===d,"fa-sort-down":"died"===j&&"DESC"===d})})})})]})}),Object(O.jsx)("th",{children:"Mother"}),Object(O.jsx)("th",{children:"Father"})]})}),Object(O.jsx)("tbody",{children:s.map((function(e){return Object(O.jsxs)("tr",{"data-cy":"person",className:u()({"has-background-warning":b===e.slug}),children:[Object(O.jsx)("td",{children:Object(O.jsx)(N,{person:e})}),Object(O.jsx)("td",{children:e.sex}),Object(O.jsx)("td",{children:e.born}),Object(O.jsx)("td",{children:e.died}),Object(O.jsx)("td",{children:e.mother?Object(O.jsx)(N,{person:e.mother}):e.motherName||"-"}),Object(O.jsx)("td",{children:e.father?Object(O.jsx)(N,{person:e.father}):e.fatherName||"-"})]},e.name)}))})]})},w="https://mate-academy.github.io/react_people-table/api/people.json";function y(e){return new Promise((function(t){return setTimeout(t,e)}))}function S(){return C.apply(this,arguments)}function C(){return(C=Object(i.a)(Object(l.a)().mark((function e(){return Object(l.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",y(500).then((function(){return fetch(w)})).then((function(e){return e.json()})));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var A=function(){var e=Object(j.useState)([]),t=Object(o.a)(e,2),a=t[0],s=t[1],n=Object(j.useState)(!0),b=Object(o.a)(n,2),u=b[0],h=b[1],x=Object(j.useState)(!1),p=Object(o.a)(x,2),m=p[0],v=p[1];Object(j.useEffect)((function(){var e=function(){var e=Object(i.a)(Object(l.a)().mark((function e(){var t;return Object(l.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,S();case 3:t=e.sent,s(t),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),v(!0);case 10:return e.prev=10,h(!1),e.finish(10);case 13:case"end":return e.stop()}}),e,null,[[0,7,10,13]])})));return function(){return e.apply(this,arguments)}}();e()}),[]);var N=function(e){var t=Object(c.d)(),a=Object(o.a)(t,1)[0];return Object(j.useMemo)((function(){var t,s=null===(t=a.get("query"))||void 0===t?void 0:t.toLowerCase(),c=a.get("sex")||"",n=a.getAll("centuries")||[],r=a.get("sortOrder"),l=a.get("sort"),i=Object(d.a)(e);return s&&(i=i.filter((function(e){return e.name.toLowerCase().includes(s)||e.sex.toLowerCase().includes(s)}))),c&&(i=i.filter((function(e){return e.sex===c}))),n.length>0&&(i=i.filter((function(e){return n.includes(Math.ceil(Number(e.born)/100).toString())}))),"name"===l?i.sort((function(e,t){return"ASC"===r?e.name.localeCompare(t.name):t.name.localeCompare(e.name)})):"sex"===l?i.sort((function(e,t){return"ASC"===r?e.sex.localeCompare(t.sex):t.sex.localeCompare(e.sex)})):("born"===l||"died"===l)&&i.sort((function(e,t){return"ASC"===r?e.born-t.born:t.born-e.born})),i}),[e,a])}(a.map((function(e){var t=a.find((function(t){return t.name===e.motherName})),s=a.find((function(t){return t.name===e.fatherName}));return Object(r.a)(Object(r.a)({},e),{},{mother:t,father:s})})));return Object(O.jsxs)(O.Fragment,{children:[Object(O.jsx)("h1",{className:"title",children:"People Page"}),Object(O.jsx)("div",{className:"block",children:Object(O.jsxs)("div",{className:"columns is-desktop is-flex-direction-row-reverse",children:[Object(O.jsx)("div",{className:"column is-7-tablet is-narrow-desktop",children:!u&&Object(O.jsx)(f,{})}),Object(O.jsx)("div",{className:"column",children:Object(O.jsxs)("div",{className:"box table-container",children:[!N.length&&Object(O.jsx)("p",{children:"There are no people matching the search criteria"}),Object(O.jsx)(g,{people:a,loading:u,error:m,displayPeople:N})]})})]})})]})},k=function(e){var t=e.isActive;return u()("navbar-item",{"has-background-grey-lighter":t})},P=function(){return Object(O.jsx)("nav",{"data-cy":"nav",className:"navbar is-fixed-top has-shadow",role:"navigation","aria-label":"main navigation",children:Object(O.jsx)("div",{className:"container",children:Object(O.jsxs)("div",{className:"navbar-brand",children:[Object(O.jsx)(c.c,{to:"/",className:k,children:"Home"}),Object(O.jsx)(c.c,{to:"/people",className:k,children:"People"})]})})})},E=(a(40),function(){return Object(O.jsx)("h1",{className:"title",children:"Home Page"})}),L=function(){return Object(O.jsx)("h1",{className:"title",children:"Page not found"})},F=function(){return Object(O.jsxs)("div",{"data-cy":"app",children:[Object(O.jsx)(P,{}),Object(O.jsx)("div",{className:"section",children:Object(O.jsx)("div",{className:"container",children:Object(O.jsxs)(n.d,{children:[Object(O.jsx)(n.b,{path:"/",element:Object(O.jsx)(E,{})}),Object(O.jsxs)(n.b,{path:"people",children:[Object(O.jsx)(n.b,{index:!0,element:Object(O.jsx)(A,{})}),Object(O.jsx)(n.b,{path:":selectedPersonId",element:Object(O.jsx)(A,{})})]}),Object(O.jsx)(n.b,{path:"/home",element:Object(O.jsx)(n.a,{to:"/",replace:!0})}),Object(O.jsx)(n.b,{path:"*",element:Object(O.jsx)(L,{})})]})})})]})};Object(s.createRoot)(document.getElementById("root")).render(Object(O.jsx)(c.a,{children:Object(O.jsx)(F,{})}))}},[[41,1,2]]]);
//# sourceMappingURL=main.fd04a357.chunk.js.map
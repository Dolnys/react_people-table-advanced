(this["webpackJsonpreact_people-table-advanced"]=this["webpackJsonpreact_people-table-advanced"]||[]).push([[0],{39:function(e,t,s){},40:function(e,t,s){},41:function(e,t,s){"use strict";s.r(t);var a=s(26),c=s(8),n=(s(36),s(37),s(3)),r=s(4),l=s(6),i=s(5),o=s(0),j=s(9),d=s(10),b=s.n(d),u=s(15),h=s(27);function x(e,t){var s=new URLSearchParams(e.toString());return Object.entries(t).forEach((function(e){var t=Object(i.a)(e,2),a=t[0],c=t[1];null===c?s.delete(a):Array.isArray(c)?(s.delete(a),c.forEach((function(e){s.append(a,e)}))):s.set(a,c)})),s.toString()}var O=s(1),m=["children","params"],p=function(e){var t=e.children,s=e.params,a=Object(h.a)(e,m),n=Object(c.d)(),r=Object(i.a)(n,1)[0];return Object(O.jsx)(c.b,Object(u.a)(Object(u.a)({to:{search:x(r,s)}},a),{},{children:t}))},f=function(){var e=Object(c.d)(),t=Object(i.a)(e,2),s=t[0],a=t[1],n=s.get("sex")||"",r=s.getAll("centuries")||[],l=s.get("query")||"";return Object(O.jsxs)("nav",{className:"panel",children:[Object(O.jsx)("p",{className:"panel-heading",children:"Filters"}),Object(O.jsxs)("p",{className:"panel-tabs","data-cy":"SexFilter",children:[Object(O.jsx)(p,{className:b()({"is-active":!n}),params:{sex:null},children:"All"}),Object(O.jsx)(p,{className:b()({"is-activ":"m"===n}),params:{sex:"m"},children:"Male"}),Object(O.jsx)(p,{className:b()({"is-active":"f"===n}),params:{sex:"f"},children:"Female"})]}),Object(O.jsx)("div",{className:"panel-block",children:Object(O.jsxs)("p",{className:"control has-icons-left",children:[Object(O.jsx)("input",{"data-cy":"NameFilter",type:"search",className:"input",placeholder:"Search",value:l,onChange:function(e){a(x(s,{query:e.target.value||null}))}}),Object(O.jsx)("span",{className:"icon is-left",children:Object(O.jsx)("i",{className:"fas fa-search","aria-hidden":"true"})})]})}),Object(O.jsx)("div",{className:"panel-block",children:Object(O.jsxs)("div",{className:"level is-flex-grow-1 is-mobile","data-cy":"CenturyFilter",children:[Object(O.jsx)("div",{className:"level-left",children:["16","17","18","19","20"].map((function(e){return Object(O.jsx)(p,{"data-cy":"century",className:b()("button","mr-1",{"is-info":r.includes(e)}),params:{centuries:(t=e,r.includes(t)?r.filter((function(e){return e!==t})):[].concat(Object(j.a)(r),[t]))},children:e},e);var t}))}),Object(O.jsx)("div",{className:"level-right ml-4",children:Object(O.jsx)(p,{"data-cy":"centuryALL",className:"button is-success is-outlined",params:{centuries:[]},children:"All"})})]})}),Object(O.jsx)("div",{className:"panel-block",children:Object(O.jsx)(p,{className:"button is-link is-outlined is-fullwidth",params:{centuries:[],sex:null,query:null},onClick:function(){a({})},children:"Reset all filters"})})]})},v=(s(39),function(){return Object(O.jsx)("div",{className:"Loader","data-cy":"loader",children:Object(O.jsx)("div",{className:"Loader__content"})})}),N=function(e){var t=e.person;return Object(O.jsx)(c.b,{to:"/people/".concat(t.slug),className:b()({"has-text-danger":"f"===t.sex}),children:t.name})},g=function(e){var t=e.people,s=e.loading,a=e.error,r=Object(c.d)(),l=Object(i.a)(r,1)[0],d=l.get("sort")||"",h=l.get("sortOrder")||"",x=Object(n.q)().selectedPersonId,m=function(e){return d!==e?{sort:e,sortOrder:"ASC"}:d===e&&"ASC"===h?{sortOrder:"DESC"}:{sort:null,sortOrder:null}},f=function(e){var t=Object(c.d)(),s=Object(i.a)(t,1)[0];return Object(o.useMemo)((function(){var t,a=null===(t=s.get("query"))||void 0===t?void 0:t.toLowerCase(),c=s.get("sex")||"",n=s.getAll("centuries")||[],r=s.get("sortOrder"),l=s.get("sort"),i=Object(j.a)(e);return a&&(i=i.filter((function(e){return e.name.toLowerCase().includes(a)||e.sex.toLowerCase().includes(a)}))),c&&(i=i.filter((function(e){return e.sex===c}))),n.length>0&&(i=i.filter((function(e){return n.includes(Math.ceil(Number(e.born)/100).toString())}))),"name"===l?i.sort((function(e,t){return"ASC"===r?e.name.localeCompare(t.name):t.name.localeCompare(e.name)})):"sex"===l?i.sort((function(e,t){return"ASC"===r?e.sex.localeCompare(t.sex):t.sex.localeCompare(e.sex)})):("born"===l||"died"===l)&&i.sort((function(e,t){return"ASC"===r?e.born-t.born:t.born-e.born})),i}),[e,s])}(t.map((function(e){var s=t.find((function(t){return t.name===e.motherName})),a=t.find((function(t){return t.name===e.fatherName}));return Object(u.a)(Object(u.a)({},e),{},{mother:s,father:a})})));return s?Object(O.jsx)(v,{}):a?Object(O.jsx)("p",{"data-cy":"peopleLoadingError",className:"has-text-danger",children:"Something went wrong"}):f.length?Object(O.jsxs)("table",{"data-cy":"peopleTable",className:"table is-striped is-hoverable is-narrow is-fullwidth",children:[Object(O.jsx)("thead",{children:Object(O.jsxs)("tr",{children:[Object(O.jsx)("th",{children:Object(O.jsxs)("span",{className:"is-flex is-flex-wrap-nowrap",children:["Name",Object(O.jsx)(p,{params:m("name"),children:Object(O.jsx)("span",{className:"icon",children:Object(O.jsx)("i",{className:b()("fas",{"fa-sort":"name"!==d,"fa-sort-up":"name"===d&&"ASC"===h,"fa-sort-down":"name"===d&&"DESC"===h})})})})]})}),Object(O.jsx)("th",{children:Object(O.jsxs)("span",{className:"is-flex is-flex-wrap-nowrap",children:["Sex",Object(O.jsx)(p,{params:m("sex"),children:Object(O.jsx)("span",{className:"icon",children:Object(O.jsx)("i",{className:b()("fas",{"fa-sort":"sex"!==d,"fa-sort-up":"sex"===d&&"ASC"===h,"fa-sort-down":"sex"===d&&"DESC"===h})})})})]})}),Object(O.jsx)("th",{children:Object(O.jsxs)("span",{className:"is-flex is-flex-wrap-nowrap",children:["Born",Object(O.jsx)(p,{params:m("born"),children:Object(O.jsx)("span",{className:"icon",children:Object(O.jsx)("i",{className:b()("fas",{"fa-sort":"born"!==d,"fa-sort-up":"born"===d&&"ASC"===h,"fa-sort-down":"born"===d&&"DESC"===h})})})})]})}),Object(O.jsx)("th",{children:Object(O.jsxs)("span",{className:"is-flex is-flex-wrap-nowrap",children:["Died",Object(O.jsx)(p,{params:m("died"),children:Object(O.jsx)("span",{className:"icon",children:Object(O.jsx)("i",{className:b()("fas",{"fa-sort":"died"!==d,"fa-sort-up":"died"===d&&"ASC"===h,"fa-sort-down":"died"===d&&"DESC"===h})})})})]})}),Object(O.jsx)("th",{children:"Mother"}),Object(O.jsx)("th",{children:"Father"})]})}),Object(O.jsx)("tbody",{children:f.map((function(e){return Object(O.jsxs)("tr",{"data-cy":"person",className:b()({"has-background-warning":x===e.slug}),children:[Object(O.jsx)("td",{children:Object(O.jsx)(N,{person:e})}),Object(O.jsx)("td",{children:e.sex}),Object(O.jsx)("td",{children:e.born}),Object(O.jsx)("td",{children:e.died}),Object(O.jsx)("td",{children:e.mother?Object(O.jsx)(N,{person:e.mother}):e.motherName||"-"}),Object(O.jsx)("td",{children:e.father?Object(O.jsx)(N,{person:e.father}):e.fatherName||"-"})]},e.name)}))})]}):Object(O.jsx)("p",{"data-cy":"noPeopleMessage",children:"There are no people on the server"})},w="https://mate-academy.github.io/react_people-table/api/people.json";function y(e){return new Promise((function(t){return setTimeout(t,e)}))}function S(){return C.apply(this,arguments)}function C(){return(C=Object(l.a)(Object(r.a)().mark((function e(){return Object(r.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",y(500).then((function(){return fetch(w)})).then((function(e){return e.json()})));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var A=function(){var e=Object(o.useState)([]),t=Object(i.a)(e,2),s=t[0],a=t[1],c=Object(o.useState)(!0),n=Object(i.a)(c,2),j=n[0],d=n[1],b=Object(o.useState)(!1),u=Object(i.a)(b,2),h=u[0],x=u[1];return Object(o.useEffect)((function(){var e=function(){var e=Object(l.a)(Object(r.a)().mark((function e(){var t;return Object(r.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,S();case 3:t=e.sent,a(t),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),x(!0);case 10:return e.prev=10,d(!1),e.finish(10);case 13:case"end":return e.stop()}}),e,null,[[0,7,10,13]])})));return function(){return e.apply(this,arguments)}}();e()}),[]),Object(O.jsxs)(O.Fragment,{children:[Object(O.jsx)("h1",{className:"title",children:"People Page"}),Object(O.jsx)("div",{className:"block",children:Object(O.jsxs)("div",{className:"columns is-desktop is-flex-direction-row-reverse",children:[Object(O.jsx)("div",{className:"column is-7-tablet is-narrow-desktop",children:!j&&Object(O.jsx)(f,{})}),Object(O.jsx)("div",{className:"column",children:Object(O.jsxs)("div",{className:"box table-container",children:[Object(O.jsx)("p",{children:"There are no people matching the current search criteria"}),Object(O.jsx)(g,{people:s,loading:j,error:h})]})})]})})]})},k=function(e){var t=e.isActive;return b()("navbar-item",{"has-background-grey-lighter":t})},E=function(){return Object(O.jsx)("nav",{"data-cy":"nav",className:"navbar is-fixed-top has-shadow",role:"navigation","aria-label":"main navigation",children:Object(O.jsx)("div",{className:"container",children:Object(O.jsxs)("div",{className:"navbar-brand",children:[Object(O.jsx)(c.c,{to:"/",className:k,children:"Home"}),Object(O.jsx)(c.c,{to:"/people",className:k,children:"People"})]})})})},P=(s(40),function(){return Object(O.jsx)("h1",{className:"title",children:"Home Page"})}),L=function(){return Object(O.jsx)("h1",{className:"title",children:"Page not found"})},F=function(){return Object(O.jsxs)("div",{"data-cy":"app",children:[Object(O.jsx)(E,{}),Object(O.jsx)("div",{className:"section",children:Object(O.jsx)("div",{className:"container",children:Object(O.jsxs)(n.d,{children:[Object(O.jsx)(n.b,{path:"/",element:Object(O.jsx)(P,{})}),Object(O.jsxs)(n.b,{path:"people",children:[Object(O.jsx)(n.b,{index:!0,element:Object(O.jsx)(A,{})}),Object(O.jsx)(n.b,{path:":selectedPersonId",element:Object(O.jsx)(A,{})})]}),Object(O.jsx)(n.b,{path:"/home",element:Object(O.jsx)(n.a,{to:"/",replace:!0})}),Object(O.jsx)(n.b,{path:"*",element:Object(O.jsx)(L,{})})]})})})]})};Object(a.createRoot)(document.getElementById("root")).render(Object(O.jsx)(c.a,{children:Object(O.jsx)(F,{})}))}},[[41,1,2]]]);
//# sourceMappingURL=main.78f15009.chunk.js.map